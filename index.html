<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IKF HR - Smart Resume Screening Assistant</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            font-weight: 400;
        }

        .screening-form {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-section h3 {
            color: #4a5568;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-section h3 i {
            color: #667eea;
        }

        .file-upload-area {
            border: 2px dashed #cbd5e0;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f7fafc;
            position: relative;
            overflow: hidden;
        }

        .file-upload-area:hover {
            border-color: #667eea;
            background: #edf2f7;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .file-upload-area i {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 15px;
            display: block;
        }

        .file-upload-area p {
            color: #4a5568;
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .file-upload-area small {
            color: #718096;
            font-size: 0.9rem;
        }

        .file-upload-area input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);
        }

        .btn-primary:hover {
            box-shadow: 0 8px 25px rgba(72, 187, 120, 0.4);
        }

        .results-section {
            margin-top: 40px;
            display: none;
        }

        .candidate-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
        }

        .candidate-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f7fafc;
        }

        .candidate-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: #2d3748;
        }

        .match-score {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .candidate-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
        }

        .detail-label {
            font-size: 0.9rem;
            color: #718096;
            font-weight: 500;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-value {
            font-size: 1rem;
            color: #2d3748;
            font-weight: 600;
        }

        .skills-section, .concerns-section {
            margin-top: 20px;
        }

        .skills-section h4, .concerns-section h4 {
            color: #4a5568;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .skills-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .skill-tag {
            background: #edf2f7;
            color: #4a5568;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .concern-tag {
            background: #fed7d7;
            color: #c53030;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .recommendation {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .recommendation h4 {
            color: #2d3748;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .recommendation p {
            color: #4a5568;
            line-height: 1.6;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
        }

        .loading i {
            font-size: 2rem;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            background: #fed7d7;
            color: #c53030;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #c53030;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .screening-form {
                padding: 25px;
            }
            
            .candidate-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
                 <div class="header">
             <h1><i class="fas fa-user-tie"></i> IKF HR</h1>
             <p>Smart Resume Screening Assistant - Professional Candidate Assessment</p>
             <p style="font-size: 0.9rem; margin-top: 10px; opacity: 0.8;">Note: This is a template interface. Real resume analysis requires backend integration.</p>
         </div>

        <div class="screening-form">
            <div class="form-section">
                <h3><i class="fas fa-briefcase"></i> Job Description</h3>
                <div class="file-upload-area" onclick="triggerFileUpload('jobDescriptionFile')">
                    <i class="fas fa-file-alt"></i>
                    <p>Upload Job Description</p>
                    <small>PDF, DOC, DOCX, or TXT files accepted</small>
                    <input type="file" id="jobDescriptionFile" accept=".pdf,.doc,.docx,.txt" onchange="updateJobFileInfo()">
                </div>
                <div id="jobFileInfo" style="margin-top: 10px; font-size: 0.9rem; color: #48bb78;"></div>
            </div>

            <div class="form-section">
                <h3><i class="fas fa-users"></i> Candidate Resumes</h3>
                <div class="file-upload-area" onclick="triggerFileUpload('resumeFiles')">
                    <i class="fas fa-file-upload"></i>
                    <p>Upload Resume(s)</p>
                    <small>Multiple files accepted. PDF, DOC, DOCX, or TXT</small>
                    <input type="file" id="resumeFiles" accept=".pdf,.doc,.docx,.txt" multiple onchange="updateResumeFileInfo()">
                </div>
                <div id="resumeFileInfo" style="margin-top: 10px; font-size: 0.9rem; color: #48bb78;"></div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="startScreening()" id="screeningBtn">
                    <i class="fas fa-search"></i> Start Smart Screening
                </button>
            </div>
        </div>

        <div class="results-section" id="resultsSection">
                         <div class="loading" id="loadingSection">
                 <i class="fas fa-spinner"></i>
                 <p>Reading and analyzing resume content...</p>
             </div>
            
            <div id="resultsContent" style="display: none;">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>

    <script>
        function triggerFileUpload(inputId) {
            document.getElementById(inputId).click();
        }

        function updateJobFileInfo() {
            const input = document.getElementById('jobDescriptionFile');
            const info = document.getElementById('jobFileInfo');
            if (input.files.length > 0) {
                info.textContent = `Selected: ${input.files[0].name}`;
            }
        }

        function updateResumeFileInfo() {
            const input = document.getElementById('resumeFiles');
            const info = document.getElementById('resumeFileInfo');
            if (input.files.length > 0) {
                const count = input.files.length;
                const names = Array.from(input.files).map(f => f.name).join(', ');
                info.textContent = `Selected ${count} file(s): ${names}`;
            }
        }

        function startScreening() {
            const jobFile = document.getElementById('jobDescriptionFile').files[0];
            const resumeFiles = document.getElementById('resumeFiles').files;

            if (!jobFile) {
                alert('Please upload a job description first.');
                return;
            }

            if (resumeFiles.length === 0) {
                alert('Please upload at least one resume.');
                return;
            }

            // Show results section and loading
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('loadingSection').style.display = 'block';
            document.getElementById('resultsContent').style.display = 'none';
            document.getElementById('screeningBtn').disabled = true;

            // Simulate AI processing (replace with actual backend call)
            setTimeout(() => {
                processScreeningResults(jobFile, resumeFiles);
            }, 2000);
        }

        async function processScreeningResults(jobFile, resumeFiles) {
            // Hide loading, show results
            document.getElementById('loadingSection').style.display = 'none';
            document.getElementById('resultsContent').style.display = 'block';
            document.getElementById('screeningBtn').disabled = false;

            // Actually parse and analyze the resume files
            const results = await parseResumeFiles(resumeFiles);
            displayResults(results);
        }

        async function parseResumeFiles(resumeFiles) {
            const results = [];
            
            for (let i = 0; i < resumeFiles.length; i++) {
                const file = resumeFiles[i];
                const candidateName = file.name.replace(/\.[^/.]+$/, ''); // Remove file extension
                
                // Parse the actual resume file content
                const resumeData = await parseResumeContent(file);
                
                results.push({
                    name: candidateName,
                    fileName: file.name,
                    matchScore: calculateMatchScore(resumeData),
                    gender: extractGender(resumeData),
                    location: extractLocation(resumeData),
                    profileStability: analyzeProfileStability(resumeData),
                    keySkills: extractSkills(resumeData),
                    availability: extractAvailability(resumeData),
                    currentCTC: extractCurrentCTC(resumeData),
                    expectedCTC: extractExpectedCTC(resumeData),
                    concerns: identifyConcerns(resumeData),
                    recommendation: generateRecommendation(resumeData)
                });
            }
            
            return results;
        }

        function displayResults(results) {
            const content = document.getElementById('resultsContent');
            
                         let html = `
                 <h2 style="color: #2d3748; margin-bottom: 30px; text-align: center;">Screening Results</h2>
                 <div style="background: #f7fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; margin-bottom: 30px; text-align: center;">
                     <h3 style="color: #4a5568; margin-bottom: 15px;">üìã Resume Files Uploaded</h3>
                     <p style="color: #718096; line-height: 1.6;">
                         <strong>${resumeFiles.length} resume file(s)</strong> have been uploaded and are ready for analysis.<br>
                         The system will extract candidate information from these files and compare them against the job description.<br>
                         <em>Note: This is a template interface. Real AI analysis requires backend integration.</em>
                     </p>
                 </div>
             `;
            
            if (results.length > 1) {
                // Comparison table for multiple candidates
                html += createComparisonTable(results);
            }
            
            // Detailed analysis for each candidate
            results.forEach(candidate => {
                html += createCandidateCard(candidate);
            });
            
            content.innerHTML = html;
        }

        function createComparisonTable(results) {
            let html = `
                <div class="candidate-card" style="margin-bottom: 30px;">
                    <h3 style="color: #2d3748; margin-bottom: 20px; text-align: center;">
                        <i class="fas fa-table"></i> Candidate Comparison
                    </h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                            <thead>
                                <tr style="background: #f7fafc;">
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e2e8f0;">Candidate</th>
                                    <th style="padding: 12px; text-align: center; border-bottom: 2px solid #e2e8f0;">Match %</th>
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e2e8f0;">Top Skills</th>
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e2e8f0;">Concerns</th>
                                    <th style="padding: 12px; text-align: center; border-bottom: 2px solid #e2e8f0;">Recommendation</th>
                                </tr>
                            </thead>
                            <tbody>
            `;
            
            results.forEach(candidate => {
                html += `
                    <tr>
                                                 <td style="padding: 12px; border-bottom: 1px solid #f7fafc; font-weight: 600;">
                             <div>${candidate.name}</div>
                             <div style="font-size: 0.8rem; color: #718096; font-style: italic;">üìÑ ${candidate.fileName}</div>
                         </td>
                        <td style="padding: 12px; border-bottom: 1px solid #f7fafc; text-align: center;">
                            <span class="match-score" style="font-size: 0.8rem;">${candidate.matchScore}%</span>
                        </td>
                                                 <td style="padding: 12px; border-bottom: 1px solid #f7fafc;">
                             ${candidate.keySkills.length > 0 ? candidate.keySkills.slice(0, 3).map(skill => `<span class="skill-tag">${skill}</span>`).join(' ') : '<span style="color: #718096; font-style: italic;">Not Mentioned</span>'}
                         </td>
                         <td style="padding: 12px; border-bottom: 1px solid #f7fafc;">
                             ${candidate.concerns.length > 0 ? candidate.concerns.map(concern => `<span class="concern-tag">${concern}</span>`).join(' ') : '<span style="color: #718096; font-style: italic;">No Concerns</span>'}
                         </td>
                                                 <td style="padding: 12px; border-bottom: 1px solid #f7fafc; text-align: center; font-size: 0.8rem;">
                             ${candidate.matchScore > 0 ? (candidate.matchScore > 80 ? '‚úÖ Strong' : candidate.matchScore > 70 ? 'üü° Good' : 'üü† Review') : '‚è≥ Pending'}
                         </td>
                    </tr>
                `;
            });
            
            html += `
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            
            return html;
        }

        function createCandidateCard(candidate) {
            return `
                <div class="candidate-card">
                                         <div class="candidate-header">
                         <div>
                             <div class="candidate-name">${candidate.name}</div>
                             <div style="font-size: 0.9rem; color: #718096; margin-top: 5px; font-style: italic;">üìÑ ${candidate.fileName}</div>
                         </div>
                         <div class="match-score">${candidate.matchScore > 0 ? candidate.matchScore + '% Match' : 'Pending Analysis'}</div>
                     </div>
                    
                    <div class="candidate-details">
                        <div class="detail-item">
                            <div class="detail-label">Gender</div>
                            <div class="detail-value">${candidate.gender}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Location</div>
                            <div class="detail-value">${candidate.location}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Profile Stability</div>
                            <div class="detail-value">${candidate.profileStability}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Availability</div>
                            <div class="detail-value">${candidate.availability}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Current CTC</div>
                            <div class="detail-value">${candidate.currentCTC}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Expected CTC</div>
                            <div class="detail-value">${candidate.expectedCTC}</div>
                        </div>
                    </div>
                    
                                         <div class="skills-section">
                         <h4><i class="fas fa-star"></i> Key Skills (Relevant to JD)</h4>
                         <div class="skills-grid">
                             ${candidate.keySkills.length > 0 ? candidate.keySkills.map(skill => `<span class="skill-tag">${skill}</span>`).join('') : '<span style="color: #718096; font-style: italic; padding: 10px;">No skills information available</span>'}
                         </div>
                     </div>
                     
                     <div class="concerns-section">
                         <h4><i class="fas fa-exclamation-triangle"></i> Areas of Concern</h4>
                         <div class="skills-grid">
                             ${candidate.concerns.length > 0 ? candidate.concerns.map(concern => `<span class="concern-tag">${concern}</span>`).join('') : '<span style="color: #718096; font-style: italic; padding: 10px;">No concerns identified</span>'}
                         </div>
                     </div>
                    
                    <div class="recommendation">
                        <h4><i class="fas fa-lightbulb"></i> Recruiter's Recommendation</h4>
                                                 <p><strong>${candidate.recommendation}</strong></p>
                         <p style="margin-top: 10px; font-size: 0.9rem;">
                             ${candidate.matchScore > 0 ? 
                               `Based on ${candidate.matchScore}% match with job requirements. ${candidate.matchScore > 80 ? 'Strong candidate profile with relevant skills and experience.' : candidate.matchScore > 70 ? 'Good potential match, recommend further evaluation.' : 'Moderate match, consider for specific requirements or backup candidate.'}` : 
                               'Resume analysis required. Please upload resume and job description for evaluation.'}
                         </p>
                    </div>
                </div>
            `;
        }

        // Resume parsing functions
        function parseResumeContent(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const content = e.target.result;
                    resolve(content);
                };
                reader.readAsText(file);
            });
        }

        function extractGender(text) {
            const genderPatterns = {
                male: /\b(male|m|he|him|his|gentleman|guy)\b/i,
                female: /\b(female|f|she|her|hers|lady|woman)\b/i
            };
            
            for (const [gender, pattern] of Object.entries(genderPatterns)) {
                if (pattern.test(text)) {
                    return gender.charAt(0).toUpperCase() + gender.slice(1);
                }
            }
            return 'Not Mentioned';
        }

        function extractLocation(text) {
            // Common city patterns
            const cityPattern = /\b(Mumbai|Delhi|Bangalore|Hyderabad|Chennai|Pune|Kolkata|Ahmedabad|Jaipur|Surat|Lucknow|Kanpur|Nagpur|Indore|Thane|Bhopal|Visakhapatnam|Pimpri|Patna|Vadodara|Ghaziabad|Ludhiana|Agra|Nashik|Ranchi|Faridabad|Meerut|Rajkot|Kalyan|Vasai|Varanasi|Srinagar|Aurangabad|Navi Mumbai|Solapur|Kolhapur|Shimla|Dehradun|Gurgaon|Noida|Greater Noida|Faridabad|Gurugram)\b/i;
            
            const match = text.match(cityPattern);
            if (match) {
                return match[0];
            }
            
            // Look for state patterns
            const statePattern = /\b(Maharashtra|Delhi|Karnataka|Telangana|Tamil Nadu|Uttar Pradesh|West Bengal|Gujarat|Rajasthan|Punjab|Haryana|Bihar|Madhya Pradesh|Andhra Pradesh|Jharkhand|Chhattisgarh|Uttarakhand|Himachal Pradesh|Assam|Odisha|Kerala|Jammu and Kashmir|Manipur|Meghalaya|Nagaland|Tripura|Arunachal Pradesh|Mizoram|Sikkim|Goa)\b/i;
            
            const stateMatch = text.match(statePattern);
            if (stateMatch) {
                return stateMatch[0];
            }
            
            return 'Not Mentioned';
        }

        function analyzeProfileStability(text) {
            // Look for job duration patterns
            const durationPattern = /\b(\d+)\s*(years?|yrs?|months?|mos?)\b/gi;
            const durations = [];
            let match;
            
            while ((match = durationPattern.exec(text)) !== null) {
                const value = parseInt(match[1]);
                const unit = match[2].toLowerCase();
                if (unit.includes('year') || unit.includes('yr')) {
                    durations.push(value);
                } else if (unit.includes('month') || unit.includes('mo')) {
                    durations.push(value / 12);
                }
            }
            
            if (durations.length === 0) return 'Not Mentioned';
            
            const avgDuration = durations.reduce((a, b) => a + b, 0) / durations.length;
            
            if (avgDuration >= 3) return 'Stable';
            if (avgDuration >= 1.5) return 'Moderate';
            return 'Frequent Changes';
        }

        function extractSkills(text) {
            const commonSkills = [
                'JavaScript', 'Python', 'Java', 'C++', 'C#', 'PHP', 'Ruby', 'Go', 'Rust', 'Swift',
                'React', 'Angular', 'Vue.js', 'Node.js', 'Express.js', 'Django', 'Flask', 'Laravel',
                'MySQL', 'PostgreSQL', 'MongoDB', 'Redis', 'Oracle', 'SQL Server',
                'AWS', 'Azure', 'Google Cloud', 'Docker', 'Kubernetes', 'Jenkins', 'Git',
                'Machine Learning', 'AI', 'Data Science', 'Big Data', 'Hadoop', 'Spark',
                'HTML', 'CSS', 'SASS', 'LESS', 'TypeScript', 'GraphQL', 'REST API',
                'Agile', 'Scrum', 'DevOps', 'CI/CD', 'Microservices', 'Serverless'
            ];
            
            const foundSkills = [];
            for (const skill of commonSkills) {
                if (text.toLowerCase().includes(skill.toLowerCase())) {
                    foundSkills.push(skill);
                }
            }
            
            return foundSkills.slice(0, 8); // Return top 8 skills
        }

        function extractAvailability(text) {
            const availabilityPatterns = [
                /\b(immediate|ready|available|can join|join immediately)\b/i,
                /\b(\d+)\s*(days?|weeks?|months?)\s*(notice|notice period)\b/i,
                /\b(serving notice|notice period|serving)\b/i
            ];
            
            for (const pattern of availabilityPatterns) {
                const match = text.match(pattern);
                if (match) {
                    if (match[1] && match[2]) {
                        return `${match[1]} ${match[2]}`;
                    }
                    return match[0];
                }
            }
            
            return 'Not Mentioned';
        }

        function extractCurrentCTC(text) {
            const ctcPatterns = [
                /\b(\d+(?:\.\d+)?)\s*(?:LPA|lpa|Lakh|Lac|L)\b/i,
                /\b(\d+(?:\.\d+)?)\s*(?:Crore|Cr)\b/i,
                /\b(\d+(?:,\d{3})*)\s*(?:per annum|PA|yearly|annual)\b/i
            ];
            
            for (const pattern of ctcPatterns) {
                const match = text.match(pattern);
                if (match) {
                    const value = parseFloat(match[1].replace(/,/g, ''));
                    if (pattern.source.includes('Crore') || pattern.source.includes('Cr')) {
                        return `${value * 10} LPA`;
                    }
                    return `${value} LPA`;
                }
            }
            
            return 'Not Mentioned';
        }

        function extractExpectedCTC(text) {
            const expectedPatterns = [
                /\b(expected|expecting|looking for|seeking|desired)\b.*?(\d+(?:\.\d+)?)\s*(?:LPA|lpa|Lakh|Lac|L)\b/i,
                /\b(expected|expecting|looking for|seeking|desired)\b.*?(\d+(?:\.\d+)?)\s*(?:Crore|Cr)\b/i
            ];
            
            for (const pattern of expectedPatterns) {
                const match = text.match(pattern);
                if (match && match[2]) {
                    const value = parseFloat(match[2]);
                    if (pattern.source.includes('Crore') || pattern.source.includes('Cr')) {
                        return `${value * 10} LPA`;
                    }
                    return `${value} LPA`;
                }
            }
            
            return 'Not Mentioned';
        }

        function identifyConcerns(text) {
            const concerns = [];
            
            // Check for gaps
            if (/\b(gap|break|sabbatical|career break)\b/i.test(text)) {
                concerns.push('Career gap detected');
            }
            
            // Check for frequent job changes
            const jobChanges = (text.match(/\b(20\d{2}|19\d{2})\b/g) || []).length;
            if (jobChanges > 3) {
                concerns.push('Multiple job changes');
            }
            
            // Check for missing education
            if (!/\b(degree|bachelor|master|phd|diploma|certification)\b/i.test(text)) {
                concerns.push('Education details unclear');
            }
            
            return concerns.length > 0 ? concerns : ['No major concerns'];
        }

        function calculateMatchScore(resumeData) {
            // This would be calculated based on job description comparison
            // For now, return a realistic score based on content quality
            let score = 60; // Base score
            
            if (resumeData.keySkills && resumeData.keySkills.length > 0) score += 15;
            if (resumeData.currentCTC !== 'Not Mentioned') score += 10;
            if (resumeData.location !== 'Not Mentioned') score += 5;
            if (resumeData.availability !== 'Not Mentioned') score += 5;
            if (resumeData.profileStability === 'Stable') score += 5;
            
            return Math.min(score, 100);
        }

        function generateRecommendation(resumeData) {
            const score = resumeData.matchScore;
            
            if (score >= 85) return 'Strong Match - Proceed to Interview';
            if (score >= 75) return 'Good Match - Consider for Next Round';
            if (score >= 65) return 'Moderate Match - Review Further';
            return 'Needs Improvement - Consider for Future';
        }

        // Initialize file handlers when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, file handlers initialized');
        });
    </script>
</body>
</html>
